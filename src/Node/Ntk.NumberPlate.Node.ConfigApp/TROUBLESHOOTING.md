# ๐ง ุฑุงูููุง ุนุจโุงุจ - Troubleshooting

## โ ุฎุทุง: "ูุฏู ุจุงุฑฺฏุฐุงุฑ ูุดุฏู ุงุณุช"

ุงฺฏุฑ ููฺฏุงู ุจุงุฒ ฺฉุฑุฏู ูุฑู ุชุณุช ุงู ุฎุทุง ุฑุง ุฏุฑุงูุช ูโฺฉูุฏุ ูุฑุงุญู ุฒุฑ ุฑุง ุฏูุจุงู ฺฉูุฏ:

### โ ฺฺฉโูุณุช ุจุฑุฑุณ

#### 1๏ธโฃ ุจุฑุฑุณ ูุฌูุฏ ูุงู

**ูุดฺฉู:** ูุงู ูุฏู ุฏุฑ ูุณุฑ ูุดุฎุต ุดุฏู ูุฌูุฏ ูุฏุงุฑุฏ

**ุฑุงู ุญู:**

```
- ูุทูุฆู ุดูุฏ ูุงู .onnx ูุงูุนุงู ุฏุฑ ูุณุฑ ูุดุฎุต ุดุฏู ููุฌูุฏ ุงุณุช
- ูุณุฑ ฺฉุงูู ู ุตุญุญ ุฑุง ฺฉูพ ฺฉูุฏ (ฺฉูฺฉ ุฑุงุณุช ุฑู ูุงู > Copy as path)
- ุงุฒ ูุณุฑ ูุทูู ุงุณุชูุงุฏู ฺฉูุฏ: C:\Models\plate_model.onnx
```

**ูุซุงู ุตุญุญ:**

```
โ C:\AI\Models\license_plate_yolo.onnx
โ D:\Projects\Models\best.onnx
โ Models\best.onnx (ูุณุฑ ูุณุจ ููฺฉู ุงุณุช ูุดฺฉู ุฏุงุดุชู ุจุงุดุฏ)
```

#### 2๏ธโฃ ุจุฑุฑุณ ูุฑูุช ูุงู

**ูุดฺฉู:** ูุงู ุจู ูุฑูุช ONNX ูุณุช

**ุฑุงู ุญู:**

```
ููุท ูุงูโูุง ุจุง ูพุณููุฏ .onnx ูพุดุชุจุงู ูโุดููุฏ

โ model.onnx
โ model.pt (ูุฑูุช PyTorch)
โ model.h5 (ูุฑูุช Keras)
โ model.pb (ูุฑูุช TensorFlow)
```

**ุชุจุฏู ูุฑูุชโูุง:**

**ุงุฒ PyTorch (.pt) ุจู ONNX:**

```bash
pip install ultralytics
yolo export model=your_model.pt format=onnx
```

**ุงุฒ TensorFlow ุจู ONNX:**

```bash
pip install tf2onnx
python -m tf2onnx.convert --saved-model model_dir --output model.onnx
```

#### 3๏ธโฃ ุจุฑุฑุณ ุณูุงูุช ูุงู

**ูุดฺฉู:** ูุงู ุฎุฑุงุจ ุง ูุงูุต ุฏุงูููุฏ ุดุฏู

**ุฑุงู ุญู:**

```powershell
# ุจุฑุฑุณ ุญุฌู ูุงู ุฏุฑ Windows PowerShell
Get-Item "C:\path\to\model.onnx" | Select-Object Name, Length

# ุญุฌู ูุฑูุงู: ูุนูููุงู 5MB ุชุง 500MB
# ุงฺฏุฑ ุญุฌู ฺฉูุชุฑ ุงุฒ 1KB ุงุณุชุ ูุงู ุฎุฑุงุจ ุงุณุช
```

**ุงูุฏุงูุงุช:**

- ูุงู ุฑุง ุฏูุจุงุฑู ุฏุงูููุฏ ฺฉูุฏ
- ุงุฒ ุฏุงูููุฏ ฺฉุงูู ุดุฏู ูุงู ุงุทููุงู ุญุงุตู ฺฉูุฏ
- ูุงู ZIP/RAR ุฑุง ฺฉุงูู Extract ฺฉูุฏ

#### 4๏ธโฃ ุจุฑุฑุณ ุฏุณุชุฑุณโูุง (Permissions)

**ูุดฺฉู:** ุจุฑูุงูู ุงุฌุงุฒู ุฎูุงูุฏู ูุงู ุฑุง ูุฏุงุฑุฏ

**ุฑุงู ุญู:**

```
1. ฺฉูฺฉ ุฑุงุณุช ุฑู ูุงู model.onnx
2. Properties > Security
3. ูุทูุฆู ุดูุฏ ฺฉุงุฑุจุฑ ูุนู ุง Everyone ุฏุณุชุฑุณ Read ุฏุงุฑุฏ
4. ุงฺฏุฑ ูุฏุงุฑุฏุ Edit > Add > Everyone > Read โ
```

**ุง:**

- ูุงู ุฑุง ุจู ูุณุฑ ุฏฺฏุฑ (ูุซูุงู Desktop) ฺฉูพ ฺฉูุฏ
- ุจุฑูุงูู ุฑุง "Run as Administrator" ุงุฌุฑุง ฺฉูุฏ

#### 5๏ธโฃ ุจุฑุฑุณ ุณุงุฒฺฏุงุฑ ูุฏู

**ูุดฺฉู:** ูุฏู ุจุง ูุณุฎู ONNX Runtime ุณุงุฒฺฏุงุฑ ูุณุช

**ุนูุงุฆู:**

```
- ุฎุทุง: "Model format not supported"
- ุฎุทุง: "Invalid model file"
- ุฎุทุง: "Unsupported opset version"
```

**ุฑุงู ุญู:**

**ฺฺฉ ฺฉุฑุฏู ูุณุฎู ONNX Runtime:**

```csharp
// ุฏุฑ ฺฉุฏ C#
Console.WriteLine(Microsoft.ML.OnnxRuntime.OrtEnv.Instance.GetVersionString());
```

**ุชุจุฏู ูุฏู ุจุง Opset ุณุงุฒฺฏุงุฑ:**

```python
import onnx
from onnx import version_converter

model = onnx.load("model.onnx")
converted_model = version_converter.convert_version(model, 12)  # Opset 12
onnx.save(converted_model, "model_v12.onnx")
```

#### 6๏ธโฃ ุจุฑุฑุณ ูุงุจุณุชฺฏโูุง

**ูุดฺฉู:** ฺฉุชุงุจุฎุงููโูุง ูุงุฒู ูุตุจ ูุดุฏูโุงูุฏ

**ุฑุงู ุญู:**

```bash
# ุจุงุฒุณุงุฒ ูพุฑูฺู
cd src/Node/Ntk.NumberPlate.Node.ConfigApp
dotnet restore
dotnet build

# ุจุฑุฑุณ ูุตุจ ุจูุฏู ูพฺฉุฌโูุง
dotnet list package
```

**ูพฺฉุฌโูุง ููุฑุฏ ูุงุฒ:**

- Microsoft.ML.OnnxRuntime (v1.17.0)
- OpenCvSharp4 (v4.9.0)
- OpenCvSharp4.runtime.win
- OpenCvSharp4.Extensions

---

## ๐ ุฎุทุงูุง ุฑุงุฌ ุฏฺฏุฑ

### ุฎุทุง: "Input name 'images' not found"

**ุฏูู:** ูุงู Input ูุงู ูุฏู ูุชูุงูุช ุงุณุช

**ุฑุงู ุญู:**

```csharp
// ุจุฑุฑุณ ูุงู Input ูุฏู
var inputNames = _session.InputMetadata.Keys;
// ุงุฒ ูุงู ุตุญุญ ุงุณุชูุงุฏู ฺฉูุฏ

// ุฏุฑ PlateDetectionTestService.cs ุฎุท 124:
// ุชุบุฑ "images" ุจู ูุงู ุตุญุญ ูุซูุงู "input" ุง "data"
NamedOnnxValue.CreateFromTensor("images", inputTensor)  // โ
NamedOnnxValue.CreateFromTensor("input", inputTensor)   // โ
```

### ุฎุทุง: "Tensor shape mismatch"

**ุฏูู:** ุงูุฏุงุฒู Input ุจุง ูุฏู ุณุงุฒฺฏุงุฑ ูุณุช

**ุฑุงู ุญู:**

```csharp
// ุจุฑุฑุณ ุงูุฏุงุฒู ููุฑุฏ ุงูุชุธุงุฑ ูุฏู
var inputMetadata = _session.InputMetadata.First().Value;
// ุชุทุจู ุงูุฏุงุฒู ุฏุฑ PreprocessImage
```

### ุฎุทุง: "Out of Memory"

**ุฏูู:** ูุฏู ุฎู ุจุฒุฑฺฏ ุงุณุช ุง ุญุงูุธู ฺฉุงู ูุณุช

**ุฑุงู ุญู:**

```
- ูุฏู ฺฉูฺฺฉโุชุฑ ุงุณุชูุงุฏู ฺฉูุฏ (ูุซูุงู YOLOv8n ุจู ุฌุง YOLOv8x)
- ุชุตุงูุฑ ฺฉูฺฺฉโุชุฑ ุขูพููุฏ ฺฉูุฏ
- ุจุฑูุงููโูุง ุฏฺฏุฑ ุฑุง ุจุจูุฏุฏ
- ุงุฒ GPU ุงุณุชูุงุฏู ฺฉูุฏ (ูุงุฒ ุจู ุชูุธูุงุช ุงุถุงู)
```

---

## ๐ ุชุณุช ุณุฑุน

ุจุฑุง ูุทูุฆู ุดุฏู ุงุฒ ุตุญุช ูุฏูุ ุงู ุงุณฺฉุฑูพุช Python ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```python
import onnxruntime as ort
import numpy as np

# ูุณุฑ ูุฏู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ
model_path = "C:/path/to/your/model.onnx"

try:
    # ุจุงุฑฺฏุฐุงุฑ ูุฏู
    session = ort.InferenceSession(model_path)

    print("โ ูุฏู ุจุง ููููุช ุจุงุฑฺฏุฐุงุฑ ุดุฏ!")
    print(f"ูุงู Input: {session.get_inputs()[0].name}")
    print(f"ุดฺฉู Input: {session.get_inputs()[0].shape}")
    print(f"ูุงู Output: {session.get_outputs()[0].name}")
    print(f"ุดฺฉู Output: {session.get_outputs()[0].shape}")

    # ุชุณุช ุงุฌุฑุง ูุฏู
    input_shape = session.get_inputs()[0].shape
    dummy_input = np.random.randn(1, 3, 640, 640).astype(np.float32)
    output = session.run(None, {session.get_inputs()[0].name: dummy_input})

    print("โ ูุฏู ุจุง ููููุช ุงุฌุฑุง ุดุฏ!")
    print(f"ุดฺฉู Output: {output[0].shape}")

except Exception as e:
    print(f"โ ุฎุทุง: {e}")
```

---

## ๐ก ูฺฉุงุช ููู

### ุฐุฎุฑู ูุณุฑ ุฏุฑ ุชูุธูุงุช

1. ูุณุฑ ฺฉุงูู ูุงู ุฑุง ฺฉูพ ฺฉูุฏ
2. ุฏุฑ ConfigApp ุฏุฑ ููุฏ "ูุณุฑ ูุฏู YOLO" paste ฺฉูุฏ
3. ุฏฺฉูู "ุฐุฎุฑู ุชูุธูุงุช" ุฑุง ุจุฒูุฏ
4. ุณูพุณ "ุชุณุช ุชุดุฎุต ูพูุงฺฉ" ุฑุง ุจุงุฒ ฺฉูุฏ

### ุงุณุชูุงุฏู ุงุฒ ูุฏู ููููู ุจุฑุง ุชุณุช

ุงฺฏุฑ ููุท ูโุฎูุงูุฏ ุจุฑูุงูู ุฑุง ุชุณุช ฺฉูุฏ:

```bash
# ุฏุงูููุฏ ูุฏู ููููู YOLOv8
pip install ultralytics
python -c "from ultralytics import YOLO; YOLO('yolov8n.pt').export(format='onnx')"

# ูุงู yolov8n.onnx ุงุฌุงุฏ ูโุดูุฏ
```

โ๏ธ **ุชูุฌู:** ุงู ูุฏู ุจุฑุง ูพูุงฺฉ ุงุฑุงู ุขููุฒุด ูุฏุฏู ู ููุท ุจุฑุง ุชุณุช ุจุฑูุงูู ููุงุณุจ ุงุณุช.

---

## ๐ ฺฉูฺฉ ุจุดุชุฑ

ุงฺฏุฑ ูุดฺฉู ุญู ูุดุฏ:

1. **ูุงฺฏ ุฎุทุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ:**

   - ุฎุทุง ุฏูู ุฑุง ุงุฏุฏุงุดุช ฺฉูุฏ
   - ุงุณฺฉุฑูโุดุงุช ุงุฒ ูพุงู ุฎุทุง ุจฺฏุฑุฏ

2. **ุงุทูุงุนุงุช ุณุณุชู:**

   - ูุณุฎู Windows
   - ูุณุฎู .NET SDK
   - ุญุฌู RAM
   - ูุฏู GPU (ุฏุฑ ุตูุฑุช ูุฌูุฏ)

3. **ุงุทูุงุนุงุช ูุฏู:**

   - ุญุฌู ูุงู
   - ููุจุน ุฏุฑุงูุช ูุฏู
   - ูุณุฎู YOLO (v5, v8, etc.)

4. **ุงุฌุงุฏ Issue ุฏุฑ GitHub:**
   - ุจุง ุงุทูุงุนุงุช ุจุงูุง ฺฉ Issue ุงุฌุงุฏ ฺฉูุฏ
   - ูุงฺฏ ุฎุทุง ฺฉุงูู ุฑุง attach ฺฉูุฏ

---

## โ ฺฺฉโูุณุช ููุง

ูุจู ุงุฒ ุจุงุฒ ฺฉุฑุฏู Issueุ ุงู ููุงุฑุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

- [ ] ูุงู .onnx ุฏุฑ ูุณุฑ ูุดุฎุต ุดุฏู ููุฌูุฏ ุงุณุช
- [ ] ูพุณููุฏ ูุงู ุฏููุงู .onnx ุงุณุช (ูู .pt ุง ฺุฒ ุฏฺฏุฑ)
- [ ] ุญุฌู ูุงู ุจุดุชุฑ ุงุฒ 1MB ุงุณุช
- [ ] ูุณุฑ ุจู ุตูุฑุช ฺฉุงูู (Absolute path) ูุงุฑุฏ ุดุฏู: `C:\...`
- [ ] ุฏุณุชุฑุณ Read ุฑู ูุงู ูุฌูุฏ ุฏุงุฑุฏ
- [ ] ูพุฑูฺู ุจุง `dotnet build` ุจุฏูู ุฎุทุง build ูโุดูุฏ
- [ ] ุชูุงู ูพฺฉุฌโูุง NuGet ูุตุจ ุดุฏูโุงูุฏ (`dotnet restore`)
- [ ] ุชูุธูุงุช ุฐุฎุฑู ุดุฏู ุงุณุช (ุฏฺฉูู "ุฐุฎุฑู ุชูุธูุงุช")

ุงฺฏุฑ ููู ููุงุฑุฏ ุจุงูุง โ ุงุณุช ุงูุง ูุดฺฉู ุงุฏุงูู ุฏุงุฑุฏุ ูุทูุงู ุจุง ูุง ุชูุงุณ ุจฺฏุฑุฏ.
